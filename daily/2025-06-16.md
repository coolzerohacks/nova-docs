Daily Report — Full Edition for 2025-06-16
1. Initial PermissionError with config.yml

    You encountered:
    PermissionError: [Errno 13] Permission denied: 'config.yml'

    Tried changing ownership with chown -R $USER:$USER config.yml but got No such file or directory error because config.yml wasn’t in the root folder but under ./rasa/config.yml.

2. Found the correct path for config.yml

    Ran find . -name "config.yml" and found it in ./rasa/config.yml.

    Noted that Rasa is running inside a Docker container.

3. Ran training command inside Docker container

    Command: docker exec rasa rasa train

    Got multiple DeprecationWarnings related to pkg_resources. Nothing critical, but flagged for future update considerations.

    Rasa started validating domain and training data.

    Warning about unused intent intimate_tell.

    Story conflict warning after intent intimate_request: conflicting predicted actions (action_brush_hair vs action_caress). Could lead to unpredictable behavior — needs attention later.

    Got FutureWarning about specifying a recipe in config (Rasa 4.0+ requirement).

    Fatal error: PermissionError: [Errno 13] Permission denied: 'config.yml' again, during config write.

4. Changed ownership recursively on ./rasa directory

    Ran:

    sudo chown -R $(id -u):$(id -g) ./rasa  
    chmod -R u+rw ./rasa

    Verified config.yml owned by your user with proper permissions:
    -rw-r--r-- 1 coolzerohacks coolzerohacks 858 Jun 14 17:13 ./rasa/config.yml

5. Checked ownership inside Docker container

    Used: docker exec -it rasa ls -l /app/config.yml

    Found owner inside container as 1000:1000 (likely your user’s UID/GID).

    Checked current user inside container with whoami → rasa.

    Attempted to chown inside container: failed with Operation not permitted — expected since changing ownership inside Docker volumes usually restricted unless container runs as root.

6. Re-ran rasa train and got new error:

    sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database

    This error indicates Rasa’s SQLite DB file is read-only inside the container.

7. Checked permissions on /app inside container

    Created test file to verify write access: succeeded → /app directory is writable.

    Checked database files presence: missing or permission issues for db.sqlite3 or database.sqlite.

8. Discovered that cache directory under ./rasa/.rasa/cache had many permission denied errors on find

    Fixed cache directory permissions by recursive chown to your user.

    Confirmed cache DB file exists and permissions allow write.

9. Explanation and Confirmation

    These permission issues stemmed from switching ownership back and forth between root and your user.

    Because Docker volume mounts inherit host filesystem permissions, container user rasa (UID 1001) didn’t have write access on those host files, causing SQLite write errors.

10. Final fix

    Applied correct ownership and permissions on all ./rasa folder and subfolders to ensure container user (UID 1001) can read/write files.

    This resolved the attempt to write a readonly database error.

    Verified that training now runs without permission errors.

11. Additional notes on warnings:

    The story conflicts and unused intent warnings are worth revisiting to improve conversation flow and reduce unexpected behavior.

12. Summary on Repeat Guard & Chat Memory Hashing

    Discussed implementing repeat guards and hashing user input for chat memory deduplication.

    Strategies include storing hash digests of chat messages to prevent duplicate entries in memory/vector store.

    Hash comparison before storing new memories ensures no repeats and memory bloat.

    These measures improve chat memory quality and response relevance.

13. Flexible Natural Language Knowledge Base Additions

    Designed and implemented flexible natural language phrase detection for knowledge base saves using regex patterns:

patterns = [
    r"nova[, ]+please remember this fact[:]? (.*)",
    r"nova[, ]+add this to your knowledge base[:]? (.*)",
    r"nova[, ]+learn this for later[:]? (.*)",
    r"nova[, ]+store this info[:]? (.*)",
    r"nova[, ]+file this under (\w+)[:]? (.*)",
    r"nova[, ]+make a note that[:]? (.*)",
    r"nova[, ]+don't forget[:]? (.*)",
]

Created handle_knowledge_addition(user_input) function to:

    Match user input against these phrases (case-insensitive).

    Extract snippet text and optional category (default general).

    Call save_raw_snippet(kb_category, text) to save text files with ISO-style UTC timestamps (YYYYMMDDTHHMMSS) inside ./knowledge/{kb_category}/raw/.

Integrated saving logic to reply with confirmation or failure message.

Recommended hooking handle_knowledge_addition() at the start of your /chat-mistral route to intercept these commands before normal chat processing.

This enables Nova to “remember” info in a friendly natural way using phrases like:

    “Nova, please remember this fact: ...”

    “Nova, add this to your knowledge base: ...”

    “Nova, file this under bugs: ...”

This feature is foundational to future retrieval and memory recall expansions.
